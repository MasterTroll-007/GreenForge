# ============================================================
# GreenForge Configuration
# ============================================================
# Generated by: greenforge init
# Edit with: greenforge config edit
# Reference: docs/configuration-reference.md

[general]
name = ""
email = ""
workspace_paths = []
log_level = "info"
language = "cs"

[ca]
cert_lifetime = "8h"
auto_renew_threshold = 0.20
algo = "ed25519"
device_cert_lifetime = "720h"   # 30 days
max_devices_per_user = 5
permissions_mode = "restricted"
allowed_device_tools = ["git:read", "logs:read", "audit:read", "notify:send"]

[ai]
default_model = "ollama/codestral"

[[ai.providers]]
name = "ollama"
endpoint = "http://localhost:11434"
model = "codestral"

# [[ai.providers]]
# name = "anthropic"
# api_key = "keychain:anthropic-api-key"   # Reference to OS keychain
# model = "claude-sonnet-4-20250514"

# [[ai.providers]]
# name = "openai"
# api_key = "keychain:openai-api-key"
# model = "gpt-4o"

# Per-project AI model policy
# [[ai.policies]]
# project_pattern = "/c/GC/*"
# allowed_providers = ["ollama"]
# reason = "Company code cannot leave network"

# [[ai.policies]]
# project_pattern = "*"
# allowed_providers = ["ollama", "anthropic", "openai"]
# reason = "Default: all providers"

[sandbox]
enabled = true
network_mode = "restricted"
cpu_limit = "2.0"
memory_limit = "2048m"
timeout = "5m"

[notify]
[[notify.channels]]
type = "cli"
enabled = true

# [[notify.channels]]
# type = "telegram"
# enabled = true
# bot_token = "keychain:telegram-bot-token"
# chat_id = "123456789"

# [[notify.channels]]
# type = "email"
# enabled = true
# address = "your@email.com"

[notify.events]
pipeline_failures = true
pr_assigned = true
all_commits = false
autofix_completed = false

[notify.morning_digest]
mode = "on_demand"     # automatic, on_demand, both
time = "07:30"

[notify.quiet_hours]
enabled = true
start = "22:00"
end = "07:00"

[gateway]
host = "127.0.0.1"
port = 18788
webui_port = 18789
tls = false

[audit]
enabled = true
retain_days = 90

[autofix]
default_policy = "notify_only"
max_auto_fixes = 3
escalate_after = "30m"

[index]
enabled = true
background_watch = true
